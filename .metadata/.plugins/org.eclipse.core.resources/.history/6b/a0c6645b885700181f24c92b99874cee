package hr.fer.zemris.java.gui.layouts;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingConstants;
import javax.swing.SwingUtilities;
import javax.swing.WindowConstants;

import org.junit.Assert;
import org.junit.Test;

public class CalcLayoutTest {

  private final double DELTA = 0.000001;

  @Test
  public void preferredSizeTest() {
    JPanel p = new JPanel(new CalcLayout(2));
    JLabel l1 = new JLabel("");
    l1.setPreferredSize(new Dimension(10, 30));
    JLabel l2 = new JLabel("");
    l2.setPreferredSize(new Dimension(20, 15));
    p.add(l1, new RCPosition(2, 2));
    p.add(l2, new RCPosition(3, 3));
    Dimension dim = p.getPreferredSize();
    Assert.assertEquals(152, dim.getWidth(), DELTA);
    Assert.assertEquals(158, dim.getHeight(), DELTA);
  }
  
  @Test
  public void preferredSizeTest2() {
    JPanel p = new JPanel(new CalcLayout(2));
    JLabel l1 = new JLabel(""); l1.setPreferredSize(new Dimension(108,15));
    JLabel l2 = new JLabel(""); l2.setPreferredSize(new Dimension(16,30));
    p.add(l1, new RCPosition(1,1));
    p.add(l2, new RCPosition(3,3));
    Dimension dim = p.getPreferredSize();
    Assert.assertEquals(152, dim.getWidth(), DELTA);
    Assert.assertEquals(158, dim.getHeight(), DELTA);
  }
  
  @Test
  public void showLayoutTest() {
    SwingUtilities.invokeLater(() -> {
      JFrame frame = new TestCalc();
      frame.pack();
      frame.setVisible(true);
    });
  }
  
  private static class TestCalc extends JFrame {
    public TestCalc() {
      setLocation(20, 50);
      setSize(300, 200);
      setTitle("Moj prvi prozor!");
      setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
      initGui();
    }
    
    private void initGUI() {
      Container cp = getContentPane();
      cp.setLayout(new BorderLayout());
      
      JLabel labela = new JLabel(
        "<html>Ovo je <u><font color='red'>Labela</font></u></html>"
      );
      labela.setOpaque(true);
      labela.setBackground(Color.YELLOW);
      labela.setHorizontalAlignment(SwingConstants.CENTER);
      
      JButton button = new JButton("Gumb");
      
      cp.add(labela, BorderLayout.CENTER);
      cp.add(button, BorderLayout.PAGE_END);
    }
    
    
  }
}
